const Discord = require("discord.js")
const db = require("quick.db");
const Canvas = require('canvas')
    , Image = Canvas.Image
    , Font = Canvas.Font
    , path = require('path');
const snekfetch = require('snekfetch');
const request = require('node-superfetch');

module.exports = async member => {
    var randomMsg = [
                    "Sunucuya GiriÅŸ yaptÄ±",      
                    ];
    var randomMsg_integer = randomMsg[Math.floor((Math.random() * randomMsg.length))]

  let msj = await db.fetch(`girisM_${member.guild.id}`)
  if (!msj) msj = `{uye}, ${randomMsg_integer}`
  let memberChannel = await db.fetch(`gcc_${member.guild.id}`)
  
  const canvas = Canvas.createCanvas(360, 240);
  const ctx = canvas.getContext('2d');
  
  const background = await Canvas.loadImage('data:image/png;base64,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');
  ctx.drawImage(background, 0, 0, canvas.width, canvas.height);
  
  ctx.strokeStyle = '#74037b';
  ctx.strokeRect(0, 0, canvas.width, canvas.height);
  
  ctx.fillStyle = `#D3D3D3`;
  ctx.font = `25px "S&S Nickson One"`;
  ctx.textAlign = "center";
  ctx.fillText(`${member.user.username.toUpperCase()}`, 170, 210);

  let avatarURL = member.user.avatarURL || member.user.defaultAvatarURL
  const { body } = await request.get(avatarURL);
  const avatar = await Canvas.loadImage(body);
  
  ctx.beginPath();
  ctx.lineWidth = 4;
  ctx.fill()
  ctx.lineWidth = 4;
    ctx.arc(112 + 55, 55 + 55, 55, 0, 2 * Math.PI, false);
  ctx.clip();
  ctx.drawImage(avatar, 112, 55, 110, 110);
  
  const attachment = new Discord.Attachment(canvas.toBuffer(), 'HoÅŸgeldin.png');
  member.guild.channels.get(memberChannel).send(attachment)
  member.guild.channels.get(memberChannel).send(msj.replace('{uye}', member).replace('{sunucu}', member.guild.name))
  if (member.user.bot) return member.guild.channels.get(memberChannel).send(`ðŸ¤– Bu bir bot, ${member.user.tag}`)
  
}